/* ================================================================
   FromSoft Co-op Settings Manager — Dark theme
   ================================================================ */

:root {
    --bg-body:    #0e0e18;
    --bg-header:  #13132a;
    --bg-card:    #181830;
    --bg-input:   #10101f;
    --border:     #2a2a4a;
    --accent:     #e94560;
    --accent-dim: #b8344d;
    --success:    #4ecca3;
    --warn:       #f0c040;
    --text:       #e0e0ec;
    --text-muted: #8888aa;
    --radius:     8px;
}

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

html { font-size: 15px; }

body {
    font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
    background: var(--bg-body);
    color: var(--text);
    min-height: 100vh;
}

/* ─── Header ──────────────────────────────────────────────── */
header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0.8rem 1.5rem;
    background: var(--bg-header);
    border-bottom: 1px solid var(--border);
    position: sticky;
    top: 0;
    z-index: 100;
}
.header-left { display: flex; align-items: center; gap: 1rem; }
header h1 { font-size: 1.15rem; font-weight: 600; letter-spacing: .02em; }

.scan-status {
    font-size: .78rem;
    color: var(--text-muted);
}
.version-display {
    font-size: .75rem;
    color: var(--text-muted);
    margin-right: 1rem;
}
.version-display.update-available {
    color: #f39c12;
    font-weight: 600;
    cursor: pointer;
    padding: .3rem .6rem;
    border-radius: var(--radius);
    background: rgba(243, 156, 18, 0.1);
}

/* ─── Buttons ─────────────────────────────────────────────── */
.btn {
    display: inline-flex;
    align-items: center;
    gap: .4rem;
    padding: .5rem 1rem;
    border: none;
    border-radius: var(--radius);
    font-size: .85rem;
    font-weight: 600;
    cursor: pointer;
    transition: background .15s, transform .1s;
}
.btn:active { transform: scale(.97); }

.btn-accent {
    background: var(--accent);
    color: #fff;
}
.btn-accent:hover { background: var(--accent-dim); }

.btn-success {
    background: var(--success);
    color: #111;
}
.btn-success:hover { background: #3db88e; }

.btn-undo {
    background: #555;
    color: #eee;
}
.btn-undo:hover { background: #777; }

.btn-reset {
    background: #6a4c93;
    color: #eee;
}
.btn-reset:hover { background: #8260ac; }

.btn-icon { font-size: 1rem; }

.btn:disabled {
    opacity: .5;
    cursor: not-allowed;
}

/* ─── Tab bar / detail header ─────────────────────────────── */
.tab-bar {
    display: flex;
    align-items: center;
    gap: 0;
    background: var(--bg-header);
    border-bottom: 2px solid var(--border);
    padding: 0 1.5rem;
    overflow-x: auto;
}
.tab-bar button {
    background: none;
    border: none;
    color: var(--text-muted);
    padding: .5rem 1.3rem;
    font-size: .88rem;
    font-weight: 600;
    cursor: pointer;
    border-bottom: 3px solid transparent;
    transition: color .15s, border-color .15s;
    white-space: nowrap;
    display: flex;
    align-items: center;
    gap: .5rem;
}
.tab-bar button:hover {
    color: var(--text);
}
.tab-bar button.active {
    color: var(--accent);
    border-bottom-color: var(--accent);
}
.btn-back {
    background: none;
    border: none;
    color: var(--accent);
    font-size: .9rem;
    font-weight: 600;
    cursor: pointer;
    padding: .6rem 1rem .6rem 0;
    white-space: nowrap;
    transition: color .15s;
    border-right: 1px solid var(--border);
    margin-right: 1rem;
}
.btn-back:hover { color: #fff; }
.detail-header-title {
    display: flex;
    align-items: center;
    gap: .5rem;
    font-size: .95rem;
    font-weight: 700;
    color: var(--text);
    padding: .5rem 0;
}
.tab-icon {
    height: 24px;
    width: auto;
    border-radius: 3px;
    object-fit: cover;
    opacity: .7;
    transition: opacity .15s;
}
.tab-bar button:hover .tab-icon,
.tab-bar button.active .tab-icon,
.detail-header-title .tab-icon {
    opacity: 1;
}

/* ─── Game Home — card grid ───────────────────────────────── */
.game-home {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
    gap: 1.5rem;
    padding: 2rem;
    max-width: 1100px;
    margin: 0 auto;
}
.home-card {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    overflow: hidden;
    transition: transform .15s, box-shadow .15s, border-color .15s;
    display: flex;
    flex-direction: column;
}
.home-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 30px rgba(0,0,0,.4);
    border-color: var(--accent);
}
.home-card-art {
    width: 100%;
    aspect-ratio: 2/3;
    overflow: hidden;
    background: #1a1a2e;
}
.home-card-art img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
    transition: transform .3s;
}
.home-card:hover .home-card-art img {
    transform: scale(1.04);
}
.home-card-info {
    padding: .8rem;
    display: flex;
    flex-direction: column;
    gap: .5rem;
}
.home-card-name {
    font-weight: 700;
    font-size: 1rem;
    color: #fff;
}
.home-card-badge {
    font-size: .72rem;
    font-weight: 600;
    padding: .2rem .5rem;
    border-radius: 3px;
    width: fit-content;
}
.badge-installed {
    background: rgba(46,204,113,.15);
    color: #2ecc71;
}
.badge-missing {
    background: rgba(231,76,60,.15);
    color: #e74c3c;
}

/* ─── Update status badge on dashboard ───────────────────── */
.home-card-update-badge {
    font-size: .7rem;
    padding: .3rem .5rem;
    border-radius: 3px;
    background: rgba(33, 150, 243, .1);
    color: #2196f3;
    display: flex;
    align-items: center;
    gap: .3rem;
    animation: fadeIn .3s ease-in;
}
.home-card-update-badge.update-available {
    background: rgba(255, 152, 0, .15);
    color: #ff9800;
    border-left: 2px solid #ff9800;
    padding-left: .4rem;
}
.home-card-update-badge.up-to-date {
    background: rgba(76, 175, 80, .15);
    color: #4caf50;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(-3px); }
    to { opacity: 1; transform: translateY(0); }
}

.home-card-players {
    font-size: .75rem;
    color: #bdc3c7;
    margin-top: .2rem;
    display: flex;
    align-items: center;
    gap: .3rem;
}
.players-icon {
    font-size: .85rem;
}
.home-card-actions {
    display: flex;
    gap: .5rem;
    margin-top: .3rem;
}
.btn-launch-sm {
    background: linear-gradient(135deg, #e67e22, #d35400);
    color: #fff;
    font-weight: 600;
    font-size: .78rem;
    padding: .4rem .8rem;
    border-radius: 6px;
    border: none;
    cursor: pointer;
    transition: transform .1s, box-shadow .1s;
}
.btn-launch-sm:hover:not(:disabled) {
    transform: translateY(-1px);
    box-shadow: 0 3px 10px rgba(230,126,34,.35);
}
.btn-launch-sm:disabled { opacity: .5; cursor: not-allowed; }
.btn-manage {
    background: var(--bg-header);
    color: var(--text);
    font-weight: 600;
    font-size: .78rem;
    padding: .4rem .8rem;
    border-radius: 6px;
    border: 1px solid var(--border);
    cursor: pointer;
    transition: background .15s, border-color .15s;
}
.btn-manage:hover {
    background: var(--border);
    border-color: var(--accent);
}
.btn-shortcut {
    background: var(--bg-header);
    color: var(--text-dim);
    font-weight: 600;
    font-size: .72rem;
    padding: .35rem .65rem;
    border-radius: 6px;
    border: 1px solid var(--border);
    cursor: pointer;
    transition: background .15s, border-color .15s, color .15s;
}
.btn-shortcut:hover:not(:disabled) {
    background: var(--border);
    border-color: var(--accent);
    color: var(--text);
}
.btn-shortcut:disabled { opacity: .5; cursor: not-allowed; }

/* ─── Landing / empty states ──────────────────────────────── */
.landing {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    padding: 5rem 2rem;
    gap: .8rem;
}
.landing-icon { font-size: 3.5rem; }
.landing h2 { font-size: 1.5rem; }
.landing p { max-width: 420px; color: var(--text-muted); line-height: 1.5; }
.muted { font-size: .82rem; }

/* ─── Spinner ─────────────────────────────────────────────── */
.spinner {
    width: 48px; height: 48px;
    border: 4px solid var(--border);
    border-top-color: var(--accent);
    border-radius: 50%;
    animation: spin .8s linear infinite;
}
@keyframes spin { to { transform: rotate(360deg); } }

/* ─── Settings panels ─────────────────────────────────────── */
.game-panel { display: none; padding: 1.5rem; max-width: 860px; margin: 0 auto; }
.game-panel.active { display: block; }

.config-path {
    font-size: .78rem;
    color: var(--text-muted);
    margin-bottom: 1.2rem;
    word-break: break-all;
}

.section-card {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    margin-bottom: 1.2rem;
    overflow: hidden;
}
.section-header {
    padding: .7rem 1rem;
    font-size: .9rem;
    font-weight: 700;
    letter-spacing: .06em;
    text-transform: uppercase;
    background: rgba(233, 69, 96, .08);
    border-bottom: 1px solid var(--border);
    color: var(--accent);
}

.setting-row {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    padding: .8rem 1rem;
    gap: 1rem;
    border-bottom: 1px solid rgba(255,255,255,.04);
}
.setting-row:last-child { border-bottom: none; }

.setting-info { flex: 1; min-width: 0; }
.setting-key {
    font-weight: 600;
    font-size: .88rem;
    color: var(--text);
    margin-bottom: .15rem;
}
.setting-desc {
    font-size: .78rem;
    color: var(--text-muted);
    line-height: 1.45;
}

.setting-control {
    flex-shrink: 0;
    width: 200px;
    display: flex;
    align-items: center;
}

.setting-control input[type="number"],
.setting-control input[type="text"],
.setting-control select {
    width: 100%;
    padding: .45rem .6rem;
    border: 1px solid var(--border);
    border-radius: 5px;
    background: var(--bg-input);
    color: var(--text);
    font-size: .85rem;
    font-family: inherit;
    transition: border-color .15s;
}
.setting-control input:focus,
.setting-control select:focus {
    outline: none;
    border-color: var(--accent);
}

/* remove number spinner arrows for cleanliness */
.setting-control input[type="number"]::-webkit-inner-spin-button,
.setting-control input[type="number"]::-webkit-outer-spin-button {
    opacity: 1;
}

/* ─── Save bar ────────────────────────────────────────────── */
.save-bar {
    position: sticky;
    bottom: 0;
    background: var(--bg-main);
    display: flex;
    justify-content: flex-end;
    align-items: center;
    padding: .6rem 0;
    gap: .8rem;
    border-top: 1px solid var(--border);
    margin-top: .8rem;
}
.change-indicator {
    font-size: .78rem;
    font-weight: 600;
    color: #f39c12;
    animation: pulse 1.5s ease-in-out infinite;
}
@keyframes pulse { 0%,100%{opacity:1} 50%{opacity:.5} }

/* ─── Changed setting highlight ───────────────────────────── */
.setting-changed {
    border-left: 3px solid #f39c12;
    background: rgba(243,156,18,.06);
    padding-left: .5rem;
    border-radius: 3px;
}

/* ─── Change table in confirm modal ───────────────────────── */
.change-table { width: 100%; border-collapse: collapse; font-size: .82rem; margin-top: .4rem; }
.change-table th { text-align: left; padding: .3rem .5rem; border-bottom: 1px solid var(--border); color: var(--text-muted); font-size: .75rem; }
.change-table td { padding: .3rem .5rem; border-bottom: 1px solid rgba(255,255,255,.05); }
.change-table .val-from { color: #e74c3c; text-decoration: line-through; }
.change-table .val-to   { color: #2ecc71; font-weight: 600; }

/* ─── Toast notifications ─────────────────────────────────── */
.toast-container {
    position: fixed;
    bottom: 1.5rem;
    right: 1.5rem;
    display: flex;
    flex-direction: column-reverse;
    gap: .5rem;
    z-index: 999;
}
.toast {
    padding: .65rem 1.1rem;
    border-radius: var(--radius);
    font-size: .84rem;
    font-weight: 500;
    color: #fff;
    box-shadow: 0 4px 20px rgba(0,0,0,.45);
    animation: toast-in .3s ease-out;
    max-width: 360px;
}
.toast.success { background: var(--success); color: #111; }
.toast.error   { background: var(--accent); }
.toast.info    { background: #2d5fa0; }

@keyframes toast-in {
    from { opacity: 0; transform: translateY(12px); }
    to   { opacity: 1; transform: translateY(0); }
}

/* ─── Utility ─────────────────────────────────────────────── */
.hidden { display: none !important; }

/* ─── Sub-tabs (Settings / Saves within a game panel) ─────── */
.sub-tab-bar {
    display: flex;
    gap: 0;
    margin-bottom: 1.2rem;
    border-bottom: 2px solid var(--border);
}
.sub-tab-bar button {
    background: none;
    border: none;
    color: var(--text-muted);
    padding: .55rem 1.1rem;
    font-size: .85rem;
    font-weight: 600;
    cursor: pointer;
    border-bottom: 3px solid transparent;
    transition: color .15s, border-color .15s;
}
.sub-tab-bar button:hover { color: var(--text); }
.sub-tab-bar button.active {
    color: var(--success);
    border-bottom-color: var(--success);
}

.sub-panel { display: none; }
.sub-panel.active { display: block; }

/* ─── Save Manager section ────────────────────────────────── */
.save-section-title {
    font-size: .95rem;
    font-weight: 700;
    color: var(--text);
    margin: 1rem 0 .4rem;
}
.save-dir-info {
    font-size: .78rem;
    color: var(--text-muted);
    word-break: break-all;
    margin-bottom: 1rem;
}

/* Transfer buttons row */
.transfer-row {
    display: flex;
    gap: .8rem;
    flex-wrap: wrap;
    margin-bottom: 1.5rem;
}
.transfer-card {
    flex: 1;
    min-width: 220px;
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 1rem;
    display: flex;
    flex-direction: column;
    gap: .5rem;
}
.transfer-card h3 {
    font-size: .88rem;
    color: var(--text);
    margin: 0;
}
.transfer-card p {
    font-size: .78rem;
    color: var(--text-muted);
    line-height: 1.4;
    margin: 0;
}
.transfer-card .btn {
    align-self: flex-start;
    margin-top: auto;
}

.btn-blue {
    background: #2d5fa0;
    color: #fff;
}
.btn-blue:hover { background: #3a71b8; }

.btn-warn {
    background: var(--warn);
    color: #111;
}
.btn-warn:hover { background: #d9ab30; }

.btn-muted {
    background: var(--border);
    color: var(--text);
}
.btn-muted:hover { background: #3a3a5a; }

.btn-danger {
    background: #8b2035;
    color: #fff;
}
.btn-danger:hover { background: #a42840; }

.btn-sm {
    padding: .35rem .7rem;
    font-size: .78rem;
}

/* Save file cards */
.save-files-row {
    display: flex;
    gap: .8rem;
    flex-wrap: wrap;
    margin-bottom: 1.5rem;
}
.file-group {
    flex: 1;
    min-width: 220px;
}
.file-group-title {
    font-size: .82rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: .05em;
    color: var(--text-muted);
    margin-bottom: .4rem;
}
.file-card {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: .6rem .8rem;
    margin-bottom: .3rem;
}
.file-name {
    font-size: .82rem;
    font-weight: 600;
    color: var(--text);
}
.file-meta {
    font-size: .72rem;
    color: var(--text-muted);
}
.file-none {
    font-size: .8rem;
    color: var(--text-muted);
    font-style: italic;
    padding: .4rem 0;
}

/* Backup list */
.backup-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: .6rem;
}
.backup-list {
    display: flex;
    flex-direction: column;
    gap: .4rem;
    margin-bottom: 1.5rem;
}
.backup-entry {
    display: flex;
    align-items: center;
    justify-content: space-between;
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: .55rem .8rem;
}
.backup-ts {
    font-size: .84rem;
    font-weight: 600;
    color: var(--text);
    font-family: 'Consolas', 'Courier New', monospace;
}
.backup-counts {
    font-size: .75rem;
    color: var(--text-muted);
}
.backup-actions {
    display: flex;
    align-items: center;
    gap: .4rem;
}
.backup-actions-label {
    font-size: .75rem;
    color: var(--text-muted);
    font-weight: 600;
    margin-right: .2rem;
}
.backup-actions-sep {
    width: 1px;
    height: 1.2rem;
    background: var(--border);
    margin: 0 .3rem;
}
.backup-none {
    font-size: .82rem;
    color: var(--text-muted);
    font-style: italic;
}

/* ─── Confirmation modal ──────────────────────────────────── */
.modal-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,.65);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
}
.modal {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 1.5rem;
    min-width: 340px;
    max-width: 460px;
}
.modal-title {
    font-size: 1rem;
    font-weight: 700;
    margin-bottom: .6rem;
}
.modal-body {
    font-size: .88rem;
    color: var(--text-muted);
    line-height: 1.5;
    margin-bottom: 1.2rem;
}
.modal-actions {
    display: flex;
    justify-content: flex-end;
    gap: .5rem;
}

/* ─── Mod Installer ───────────────────────────────────────── */
.installer-status-bar {
    padding: .5rem 1rem;
    border-radius: var(--radius);
    font-weight: 700;
    font-size: .85rem;
    margin-bottom: .8rem;
    text-align: center;
}
.installer-status-bar.mod-yes { background: rgba(46,204,113,.15); color: #2ecc71; }
.installer-status-bar.mod-no  { background: rgba(231,76,60,.15);  color: #e74c3c; }

.nexus-link {
    display: inline-block;
    margin-top: .4rem;
    color: var(--accent);
    text-decoration: underline;
    word-break: break-all;
    font-size: .9rem;
}
.nexus-link:hover { color: #fff; }

.installer-step-body { padding: .6rem .8rem; font-size: .88rem; line-height: 1.6; }
.installer-step-body p { margin-bottom: .5rem; }
.installer-note { color: var(--text-muted); font-style: italic; font-size: .82rem; }
.installer-detail { font-size: .82rem; margin-bottom: .3rem; }
.detail-label { color: var(--text-muted); }
.detail-value { font-family: 'Consolas','Courier New',monospace; font-size: .8rem; }
.detail-value.status-installed { color: #2ecc71; }
.installer-steps-list { padding-left: 1.3rem; margin: .4rem 0; }
.installer-steps-list li { margin-bottom: .3rem; }
code { background: rgba(255,255,255,.06); padding: .1em .3em; border-radius: 3px; font-size: .82rem; }

/* ─── Launch panel ────────────────────────────────────────── */
.launch-card {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 3rem 2rem;
    text-align: center;
    gap: 1rem;
}
.launch-icon {
    cursor: pointer;
    border-radius: 12px;
    overflow: hidden;
    transition: transform .15s, box-shadow .15s;
    user-select: none;
    box-shadow: 0 4px 20px rgba(0,0,0,.4);
}
.launch-icon:hover {
    transform: scale(1.03);
    box-shadow: 0 6px 30px rgba(230,126,34,.4);
}
.launch-icon:active,
.launch-icon-active {
    transform: scale(.97);
    box-shadow: 0 2px 10px rgba(230,126,34,.3);
}
.launch-game-img {
    display: block;
    width: 200px;
    height: auto;
    border-radius: 12px;
    pointer-events: none;
}
.launch-title {
    font-size: 1.4rem;
    font-weight: 700;
    color: #fff;
}
.launch-subtitle {
    color: var(--text-muted);
    font-size: .9rem;
    margin-bottom: .5rem;
}
.launch-warning {
    color: #e74c3c;
    font-size: .85rem;
    margin-top: .5rem;
}
.sub-tab-launch {
    font-weight: 600;
}
.sub-tab-launch .btn-icon {
    margin-right: .2rem;
}

.zip-list { display: flex; flex-direction: column; gap: .5rem; margin-top: .4rem; }
.zip-entry {
    display: flex;
    align-items: center;
    justify-content: space-between;
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: .5rem .8rem;
}
.zip-name { font-weight: 600; font-size: .85rem; }
.zip-meta { font-size: .75rem; color: var(--text-muted); }
.zip-actions { display: flex; gap: .4rem; align-items: center; flex-shrink: 0; }
.btn-danger-sm {
    background: transparent;
    color: #e74c3c;
    font-weight: 600;
    font-size: .78rem;
    padding: .35rem .7rem;
    border-radius: 6px;
    border: 1px solid #e74c3c44;
    cursor: pointer;
    transition: background .15s, border-color .15s, color .15s;
}
.btn-danger-sm:hover:not(:disabled) {
    background: #e74c3c22;
    border-color: #e74c3c;
    color: #ff6b6b;
}
.btn-danger-sm:disabled { opacity: .5; cursor: not-allowed; }

/* ─── Mod Update Checking ─────────────────────────────────── */
.mod-update-check {
    display: flex;
    align-items: center;
    gap: .5rem;
    padding: .8rem 1rem;
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    margin-bottom: .8rem;
    font-size: .9rem;
    color: var(--text-muted);
}

.mod-update-available {
    background: transparent;
    border: none;
    padding: 0;
    margin-bottom: .8rem;
}

.mod-up-to-date {
    background: #e8f5e9;
    border-left: 4px solid #4caf50;
    color: #222 !important;
    padding: 0.5rem 1rem;
    border-radius: 4px;
    margin-bottom: .8rem;
}

.spinner {
    width: 16px;
    height: 16px;
    border: 2px solid var(--border);
    border-top-color: var(--accent);
    border-radius: 50%;
    animation: spin .6s linear infinite;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

/* ─── Responsive tweaks ───────────────────────────────────── */
@media (max-width: 640px) {
    .setting-row { flex-direction: column; }
    .setting-control { width: 100%; }
    header { flex-direction: column; gap: .6rem; padding: .6rem 1rem; }
    .transfer-row, .save-files-row { flex-direction: column; }
}
